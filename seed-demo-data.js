// Seed demo data for hackathon presentation
const mongoose = require('mongoose');
require('dotenv').config();

const Vendor = require('./models/Vendor');

const demoVendors = [
    {
        name: "Raj's Tea Stall",
        businessName: "Raj's Tea Stall",
        phone: "+91 9876543210",
        category: "food",
        location: {
            type: "Point",
            coordinates: [77.5946, 12.9716], // Bangalore
            address: {
                street: "MG Road, Near Metro Station"
            }
        },
        products: [
            { name: "Masala Tea", price: 10, available: true },
            { name: "Samosa", price: 15, available: true },
            { name: "Vada Pav", price: 20, available: true }
        ],
        isCurrentlyOpen: true,
        isVerified: true,
        status: "active",
        onboardingSource: "whatsapp",
        createdVia: "whatsapp",
        digitalPresence: {
            hasOnlinePresence: true,
            whatsappEnabled: true,
            autoGenerated: true,
            totalOrders: 25,
            completedOrders: 23,
            rating: { average: 4.5, count: 12 }
        },
        paymentMethods: {
            cash: true,
            upi: true,
            upiId: "raj@paytm"
        }
    },
    {
        name: "Priya Fashion",
        businessName: "Priya Fashion Store",
        phone: "+91 9876543211",
        category: "clothing",
        location: {
            type: "Point",
            coordinates: [77.6082, 12.9719], // Brigade Road
            address: {
                street: "Brigade Road, Near Forum Mall"
            }
        },
        products: [
            { name: "Cotton T-Shirt", price: 299, available: true },
            { name: "Jeans", price: 899, available: true },
            { name: "Kurta", price: 599, available: true }
        ],
        isCurrentlyOpen: true,
        isVerified: true,
        status: "active",
        onboardingSource: "whatsapp",
        createdVia: "whatsapp",
        digitalPresence: {
            hasOnlinePresence: true,
            whatsappEnabled: true,
            autoGenerated: true,
            totalOrders: 18,
            completedOrders: 16,
            rating: { average: 4.2, count: 8 }
        },
        paymentMethods: {
            cash: true,
            upi: true,
            upiId: "priya@phonepe"
        }
    },
    {
        name: "Tech Corner",
        businessName: "Tech Corner Electronics",
        phone: "+91 9876543212",
        category: "electronics",
        location: {
            type: "Point",
            coordinates: [77.6309, 12.9279], // Koramangala
            address: {
                street: "Koramangala 5th Block"
            }
        },
        products: [
            { name: "Phone Charger", price: 199, available: true },
            { name: "Bluetooth Earphones", price: 799, available: true },
            { name: "Power Bank", price: 1299, available: true }
        ],
        isCurrentlyOpen: false,
        isVerified: true,
        status: "active",
        onboardingSource: "whatsapp",
        createdVia: "whatsapp",
        digitalPresence: {
            hasOnlinePresence: true,
            whatsappEnabled: true,
            autoGenerated: true,
            totalOrders: 12,
            completedOrders: 11,
            rating: { average: 4.8, count: 6 }
        },
        paymentMethods: {
            cash: true,
            upi: true,
            upiId: "tech@gpay"
        }
    }
];

async function seedData() {
    try {
        console.log('ğŸŒ± Seeding demo data for hackathon...');
        
        // Connect to MongoDB
        await mongoose.connect(process.env.MONGODB_URI, {
            useNewUrlParser: true,
            useUnifiedTopology: true
        });
        console.log('âœ… Connected to MongoDB');
        
        // Clear existing demo vendors
        await Vendor.deleteMany({ onboardingSource: 'whatsapp' });
        console.log('ğŸ§¹ Cleared existing demo data');
        
        // Insert demo vendors
        const vendors = await Vendor.insertMany(demoVendors);
        console.log(`âœ… Created ${vendors.length} demo vendors`);
        
        vendors.forEach(vendor => {
            console.log(`   ğŸ“ ${vendor.name} - ${vendor.products.length} products`);
        });
        
        console.log('\nğŸ‰ Demo data seeded successfully!');
        console.log('\nğŸ“± Test URLs:');
        console.log('   Customer PWA: http://localhost:3000/');
        console.log('   WhatsApp Demo: http://localhost:3000/whatsapp-demo.html');
        console.log('   API Health: http://localhost:3000/api/health');
        
        process.exit(0);
        
    } catch (error) {
        console.error('âŒ Seeding failed:', error);
        process.exit(1);
    }
}

seedData();