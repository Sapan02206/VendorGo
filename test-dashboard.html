<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        .test-result { margin: 1rem 0; padding: 1rem; border-radius: 8px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
        button { padding: 0.5rem 1rem; margin: 0.5rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Dashboard Functionality Test</h1>
    
    <button onclick="testLogin()">Test Login</button>
    <button onclick="testProfile()">Test Profile</button>
    <button onclick="testDashboard()">Test Dashboard Functions</button>
    
    <div id="results"></div>

    <script src="js/api.js"></script>
    <script>
        const api = new VendorGoAPI();
        
        async function testLogin() {
            try {
                const result = await api.login('23685948', 'defaultpassword123', 'vendor');
                showResult('Login successful!', 'success');
                console.log('Login result:', result);
            } catch (error) {
                showResult('Login failed: ' + error.message, 'error');
                console.error('Login error:', error);
            }
        }
        
        async function testProfile() {
            try {
                const profile = await api.getProfile();
                showResult('Profile loaded successfully!', 'success');
                console.log('Profile:', profile);
            } catch (error) {
                showResult('Profile failed: ' + error.message, 'error');
                console.error('Profile error:', error);
            }
        }
        
        async function testDashboard() {
            try {
                // Test if user is authenticated
                const isAuth = api.isAuthenticated();
                const isVendor = api.isVendor();
                
                showResult(`Authentication: ${isAuth}, Is Vendor: ${isVendor}`, isAuth && isVendor ? 'success' : 'error');
                
                if (isAuth && isVendor) {
                    const profile = await api.getProfile();
                    showResult(`Profile loaded: ${profile.name} (${profile.phone})`, 'success');
                    
                    if (profile.products) {
                        showResult(`Products found: ${profile.products.length}`, 'success');
                    } else {
                        showResult('No products found', 'error');
                    }
                }
            } catch (error) {
                showResult('Dashboard test failed: ' + error.message, 'error');
                console.error('Dashboard error:', error);
            }
        }
        
        function showResult(message, type) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(div);
        }
    </script>
</body>
</html>